# agents 配置

Agent 配置定义了你的 AI 代理行为和能力。

## 结构

```json
{
  "agents": {
    "defaults": { ... },
    "list": [ ... ]
  }
}
```

## defaults

全局默认配置，应用于所有 Agent。

### 常用配置项

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `model.primary` | string | - | 主用模型 |
| `model.fallbacks` | array | [] | 备用模型列表 |
| `workspace` | string | ~/.openclaw/workspace | 工作区路径 |
| `heartbeat.every` | string | 55m | 心跳间隔 |
| `maxConcurrent` | number | 4 | 最大并发数 |

### memorySearch 配置

| 配置项 | 类型 | 说明 |
|--------|------|------|
| `enabled` | boolean | 是否启用 |
| `provider` | string | 提供商 (openai/local/gemini/voyage) |
| `fallback` | string | 备选方案 |
| `cache.enabled` | boolean | 是否启用缓存 |

### contextPruning 配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `mode` | string | cache-ttl | 裁剪模式 |
| `ttl` | string | 5m | TTL 时间 |
| `softTrimRatio` | number | 0.3 | 软裁剪比例 |
| `hardClearRatio` | number | 0.5 | 硬裁剪比例 |

### compaction 配置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `mode` | string | safeguard | 压缩模式 |
| `reserveTokensFloor` | number | 20000 | 保留 token 下限 |

## list

Agent 列表，定义具体的 Agent 实例。

```json
{
  "agents": {
    "list": [
      {
        "id": "main",
        "name": "Main Agent",
        "workspace": "/root/.openclaw/workspace",
        "model": {
          "primary": "minimax/MiniMax-M2.5",
          "fallbacks": []
        },
        "heartbeat": {
          "every": "55m"
        }
      }
    ]
  }
}
```

### Agent 配置项

| 配置项 | 类型 | 说明 |
|--------|------|------|
| `id` | string | Agent ID（必需） |
| `name` | string | Agent 名称 |
| `workspace` | string | 工作区路径 |
| `agentDir` | string | Agent 目录 |
| `model` | object | 模型配置 |
| `skills` | array | 技能列表 |
| `memorySearch` | object | 记忆搜索配置 |
| `heartbeat` | object | 心跳配置 |
| `identity` | object | 身份配置 |
| `groupChat` | object | 群聊配置 |
| `tools` | object | 工具配置 |
| `sandbox` | object | 沙箱配置 |
